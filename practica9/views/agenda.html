<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agenda - Clinica Lo Mismo Pero Mas Barato</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../assets/css/estilos-globales.css" />

    <style>
      .calendario-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 10px;
        margin-top: 20px;
      }

      .dia-calendario {
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 10px;
        min-height: 100px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .dia-calendario:hover {
        border-color: var(--color-principal);
        box-shadow: 0 3px 10px rgba(0, 160, 227, 0.2);
      }

      .dia-numero {
        font-weight: 600;
        font-size: 1.1rem;
        color: var(--color-principal);
      }

      .dia-otro-mes {
        opacity: 0.3;
      }

      .dia-hoy {
        background: var(--color-fondo);
        border-color: var(--color-principal);
      }

      .cita-mini {
        background: var(--color-principal);
        color: white;
        padding: 2px 5px;
        border-radius: 4px;
        font-size: 0.7rem;
        margin-top: 5px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .encabezado-dia {
        text-align: center;
        font-weight: 600;
        color: var(--color-principal);
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div class="overlay" id="overlay"></div>

    <nav class="navegacion-lateral" id="navegacionLateral">
      <div class="encabezado-lateral">
        <button class="btn-cerrar-lateral" id="btnCerrarLateral">
          <i class="fas fa-times"></i>
        </button>
        <h3>Menu</h3>
      </div>
      <ul class="menu-lateral">
        <li class="item-menu-lateral">
          <a href="dashboard.html" class="enlace-menu-lateral">
            <i class="fas fa-home"></i><span>Dashboard</span>
          </a>
        </li>
        <li class="item-menu-lateral">
          <a href="pacientes.php" class="enlace-menu-lateral">
            <i class="fas fa-user-injured"></i><span>Pacientes</span>
          </a>
        </li>
        <li class="item-menu-lateral">
          <a href="agenda.html" class="enlace-menu-lateral activo">
            <i class="fas fa-calendar-alt"></i><span>Agenda</span>
          </a>
        </li>
        <li class="item-menu-lateral">
          <a href="medicos.php" class="enlace-menu-lateral">
            <i class="fas fa-user-md"></i><span>Medicos</span>
          </a>
        </li>
        <li class="item-menu-lateral">
          <a href="reportes.html" class="enlace-menu-lateral">
            <i class="fas fa-chart-bar"></i><span>Reportes</span>
          </a>
        </li>
        <li class="item-menu-lateral">
          <a href="pagos.html" class="enlace-menu-lateral">
            <i class="fas fa-credit-card"></i><span>Pagos</span>
          </a>
        </li>
        <li class="item-menu-lateral">
          <a href="tarifas.html" class="enlace-menu-lateral">
            <i class="fas fa-dollar-sign"></i><span>Tarifas</span>
          </a>
        </li>
        <li class="item-menu-lateral">
          <a href="bitacoras.html" class="enlace-menu-lateral">
            <i class="fas fa-history"></i><span>Bitácoras</span>
          </a>
        </li>
        <li class="item-menu-lateral">
          <a href="especialidades.html" class="enlace-menu-lateral">
            <i class="fas fa-stethoscope"></i><span>Especialidades</span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="contenedor-principal">
      <header class="barra-superior">
        <div class="contenido-barra">
          <div class="logo-sistema">
            <button class="btn-toggle-menu" id="btnToggleMenu">
              <i class="fas fa-bars"></i>
            </button>
            <img
              src="../assets/img/logo-simi.png"
              alt="Logo"
              class="logo-imagen"
            />
            <h1>Clinica Lo Mismo Pero Mas Barato</h1>
          </div>
          <div class="info-usuario">
            <div class="usuario-perfil">
              <span id="nombreUsuario">Usuario</span>
              <div class="avatar-usuario">
                <span id="inicialesUsuario">U</span>
              </div>
            </div>
            <button class="btn-cerrar-sesion" id="btnCerrarSesion">
              <i class="fas fa-sign-out-alt"></i> Salir
            </button>
          </div>
        </div>
      </header>

      <main class="contenido-principal">
        <div
          class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2"
        >
          <h2 class="titulo-seccion mb-0">
            <i class="fas fa-calendar-alt me-2"></i>Control de Agenda
          </h2>
          <button class="btn-primario" id="btnNuevaCita">
            <i class="fas fa-plus me-2"></i>Nueva Cita
          </button>
        </div>

        <!-- Vista Calendario -->
        <div id="vistaCalendario">
          <div class="tarjeta">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <button class="btn-secundario" id="btnMesAnterior">
                <i class="fas fa-chevron-left"></i>
              </button>
              <h3 class="mb-0" id="mesAnioActual">Noviembre 2025</h3>
              <button class="btn-secundario" id="btnMesSiguiente">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>

            <div class="calendario-grid">
              <div class="encabezado-dia">Dom</div>
              <div class="encabezado-dia">Lun</div>
              <div class="encabezado-dia">Mar</div>
              <div class="encabezado-dia">Mié</div>
              <div class="encabezado-dia">Jue</div>
              <div class="encabezado-dia">Vie</div>
              <div class="encabezado-dia">Sáb</div>
            </div>

            <div class="calendario-grid" id="diasCalendario">
              <!-- Se llamara dinamicamente -->
            </div>
          </div>

          <!-- Citas del Dia Seleccionado -->
          <div class="tarjeta mt-4">
            <h3 class="titulo-tarjeta">
              <i class="fas fa-list"></i>
              Citas del <span id="fechaSeleccionada">7 de Noviembre, 2025</span>
            </h3>
            <div class="table-responsive">
              <table class="tabla-personalizada">
                <thead>
                  <tr>
                    <th>Hora</th>
                    <th>Paciente</th>
                    <th>Médico</th>
                    <th>Motivo</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="tablaCitasDia">
                  <tr>
                    <td>09:00 AM</td>
                    <td>Juan Perez</td>
                    <td>Dr. Garcia</td>
                    <td>Consulta General</td>
                    <td><span class="badge bg-success">Confirmada</span></td>
                    <td>
                      <button
                        class="btn btn-sm btn-warning me-1"
                        onclick="editarCita(1)"
                      >
                        <i class="fas fa-edit"></i>
                      </button>
                      <button
                        class="btn btn-sm btn-danger"
                        onclick="cancelarCita(1)"
                      >
                        <i class="fas fa-times"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Vista Formulario Cita -->
        <div id="vistaFormularioCita" style="display: none">
          <div class="tarjeta">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h3 class="titulo-tarjeta mb-0">
                <i class="fas fa-calendar-plus"></i>
                <span id="tituloFormularioCita">Nueva Cita</span>
              </h3>
              <button class="btn-secundario" id="btnVolverCalendario">
                <i class="fas fa-arrow-left me-2"></i>Volver
              </button>
            </div>

            <form id="formularioCita">
              <div class="row">
                <div class="col-md-6">
                  <div class="grupo-formulario">
                    <label class="etiqueta-formulario">
                      <i class="fas fa-user-injured me-2"></i>Paciente
                    </label>
                    <select class="campo-formulario" id="pacienteCita" required>
                      <option value="">Selecciona un paciente...</option>
                      <option value="1">Juan Perez Garcia</option>
                      <option value="2">María López Sánchez</option>
                    </select>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="grupo-formulario">
                    <label class="etiqueta-formulario">
                      <i class="fas fa-user-md me-2"></i>Médico
                    </label>
                    <select class="campo-formulario" id="medicoCita" required>
                      <option value="">Selecciona un médico...</option>
                      <option value="1">Dr. Garcia</option>
                      <option value="2">Dra. Martínez</option>
                    </select>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="grupo-formulario">
                    <label class="etiqueta-formulario">
                      <i class="fas fa-calendar me-2"></i>Fecha
                    </label>
                    <input
                      type="date"
                      class="campo-formulario"
                      id="fechaCita"
                      required
                    />
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="grupo-formulario">
                    <label class="etiqueta-formulario">
                      <i class="fas fa-clock me-2"></i>Hora
                    </label>
                    <input
                      type="time"
                      class="campo-formulario"
                      id="horaCita"
                      required
                    />
                  </div>
                </div>

                <div class="col-md-12">
                  <div class="grupo-formulario">
                    <label class="etiqueta-formulario">
                      <i class="fas fa-notes-medical me-2"></i>Motivo de
                      Consulta
                    </label>
                    <textarea
                      class="campo-formulario"
                      id="motivoCita"
                      rows="3"
                      placeholder="Describe el motivo de la cita"
                      required
                    ></textarea>
                  </div>
                </div>

                <div class="col-md-12">
                  <div class="grupo-formulario">
                    <label class="etiqueta-formulario">
                      <i class="fas fa-comment me-2"></i>Observaciones
                    </label>
                    <textarea
                      class="campo-formulario"
                      id="observacionesCita"
                      rows="2"
                      placeholder="Observaciones adicionales"
                    ></textarea>
                  </div>
                </div>
              </div>

              <div class="d-flex gap-2 justify-content-end mt-4">
                <button
                  type="button"
                  class="btn-secundario"
                  id="btnCancelarFormCita"
                >
                  <i class="fas fa-times me-2"></i>Cancelar
                </button>
                <button type="submit" class="btn-primario">
                  <i class="fas fa-save me-2"></i>Guardar Cita
                </button>
              </div>
            </form>
          </div>
        </div>
      </main>

      <nav class="navegacion-inferior">
        <ul class="menu-navegacion">
          <li class="item-menu">
            <a href="dashboard.html" class="enlace-menu">
              <i class="fas fa-home"></i><span>Inicio</span>
            </a>
          </li>
          <li class="item-menu">
            <a href="pacientes.php" class="enlace-menu">
              <i class="fas fa-user-injured"></i><span>Pacientes</span>
            </a>
          </li>
          <li class="item-menu">
            <a href="agenda.html" class="enlace-menu activo">
              <i class="fas fa-calendar-alt"></i><span>Agenda</span>
            </a>
          </li>
          <li class="item-menu">
            <a href="medicos.php" class="enlace-menu">
              <i class="fas fa-user-md"></i><span>Medicos</span>
            </a>
          </li>
          <li class="item-menu">
            <a href="reportes.html" class="enlace-menu">
              <i class="fas fa-chart-bar"></i><span>Reportes</span>
            </a>
          </li>
          <li class="item-menu">
            <a href="pagos.html" class="enlace-menu">
              <i class="fas fa-credit-card"></i><span>Pagos</span>
            </a>
          </li>
          <li class="item-menu">
            <a href="tarifas.html" class="enlace-menu">
              <i class="fas fa-dollar-sign"></i><span>Tarifas</span>
            </a>
          </li>
          <li class="item-menu">
            <a href="bitacoras.html" class="enlace-menu">
              <i class="fas fa-history"></i><span>Bitacoras</span>
            </a>
          </li>
          <li class="item-menu">
            <a href="especialidades.html" class="enlace-menu">
              <i class="fas fa-stethoscope"></i><span>Especialidades</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <script src="../assets/js/utils/navegacion.js"></script>
    <script src="../assets/js/utils/validaciones.js"></script>
    <script src="../assets/js/controllers/controlador-agenda.js"></script>
  </body>
</html>
